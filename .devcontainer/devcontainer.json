{
  "name": "MosaicFS Dev",
  "dockerComposeFile": "docker-compose.yml",
  "service": "dev",
  "workspaceFolder": "/workspace",

  // Forward ports so developers can reach services from the host browser
  "forwardPorts": [5984, 8443, 5173],
  "portsAttributes": {
    "5984": { "label": "CouchDB" },
    "8443": { "label": "MosaicFS Server (HTTPS)" },
    "5173": { "label": "Vite Dev Server" }
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "sadesyllas.vscode-couchdb"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },

  // Ensure CouchDB system databases exist on first start
  "postStartCommand": "curl -sf -u admin:devpassword -X PUT http://couchdb:5984/_users    || true; curl -sf -u admin:devpassword -X PUT http://couchdb:5984/_replicator || true"
}
